<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/master.css">
  <title>Please Read Book!</title>
  <!--Firebase-->
  <script src="https://www.gstatic.com/firebasejs/4.5.2/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-messaging.js"></script>
  <script type="text/javascript" src="/js/fireinit.js"></script>
  <script type="text/javascript">
    firebase.auth().onAuthStateChanged(function(user) {
      if (user) {
      }else{
        alert("계정 없음");
      }
    });
  </script>
</head>

<body>
  <div class="container-fluid">
    <div class="row d-flex justify-content-center">
      <div class="title">
        추가 정보 입력!
      </div>
    </div>
    <div class="row d-flex justify-content-center">
      <div class="RegisterBox">
        <form class="form center-block" action="/auth.html" method="post" id="REGISTER_FORM">
          <div class="input-group">
            <input class="form-control" type="password" id="PASSWD" name="passwd" maxlength="16" placeholder="Password" />
          </div>
          <div class="input-group">
            <input class="form-control" type="password" id="PASSWD_CONFIRM" name="passwdConfirm" maxlength="16" placeholder="Password Confirm" />
          </div>
          <div class="input-group">
            <input type="text" class="form-control" name="nickname" value="" id="NICKNAME" placeholder="Nick Name">
          </div>

          <div class="btn-group d-flex justify-content-between">
            <button type="button" class="btn btn-primary" name="button" id="COMPLITE_BTN">완료</button>
          </div>
        </form>
      </div>
    </div>
    <div class="row d-flex justify-content-center">
      <div id="firebaseui-auth-container"></div>
    </div>
  </div>


  <!--Core Script CDN Link-->
  <!--Bootstrap-->
  <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
  <script src="/js/serializeObject.js"></script>
  <script type="text/javascript">
    $(function ($) {
      $('COMPLITE_FORM').click(function () {
        var $form = $('#REGISTER_FORM').serializeObject();
        var nickname = $form.nickname;
        var passwd = $form.passwd;

        user.updateProfile({
          'displayName': nickname,
          'password': passwd,
        }).then(function() {
          window.location.href = "/auth.html";
        }, function(error) {
          alert("회원정보 업데이트 실패\n" + error.message);
        });
      });
    });
  </script>
</body>

</html>
